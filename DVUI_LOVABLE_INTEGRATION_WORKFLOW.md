# DVUI + Lovable UI Integration Workflow

**Goal:** Integrate Lovable UI components (CommandCenter, etc.) into your project-governance-dvui app with Dataverse data.

**Your Setup:**
- **PWC Laptop Path:** `C:\Users\gchimion001\OneDrive - PwC\Desktop\VSCODE\PowerAppsRepoPWC\VSCODE\project-governance-dvui`
- **GitHub Repo:** georgchimion-oss/Test
- **Workflow:** You copy files from GitHub â†’ PWC laptop â†’ Edit â†’ Build â†’ Deploy

---

## ğŸ“ File Structure Overview

Here's what you'll have in `project-governance-dvui/src/`:

```
src/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ lovable.ts                    # Lovable type definitions (NEW)
â”œâ”€â”€ mappers/
â”‚   â””â”€â”€ dataverseToLovable.ts         # Data conversion functions (NEW)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ CommandCenter.tsx             # Your new CommandCenter from Lovable (NEW)
â”‚   â”œâ”€â”€ dashboard/                    # Lovable dashboard components (NEW)
â”‚   â”‚   â”œâ”€â”€ DeliverableRow.tsx
â”‚   â”‚   â”œâ”€â”€ KPICard.tsx
â”‚   â”‚   â”œâ”€â”€ ProjectProgress.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ layout/                       # Lovable layout components (NEW)
â”‚   â”‚   â”œâ”€â”€ AppSidebar.tsx
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â””â”€â”€ MainLayout.tsx
â”‚   â””â”€â”€ ui/                           # shadcn/ui components (NEW)
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â”œâ”€â”€ badge.tsx
â”‚       â””â”€â”€ ...
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ CommandCenterPage.tsx         # CommandCenter + Dataverse integration (NEW)
â”‚   â””â”€â”€ DeliverablesPage.tsx          # Example deliverables page (NEW)
â”œâ”€â”€ generated/                        # Auto-generated by pac code
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ services/
â”‚   â””â”€â”€ validators/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ utils.ts                      # Utility functions (if needed)
â””â”€â”€ App.tsx                           # Main app component
```

---

## ğŸš€ Step-by-Step Workflow

### Phase 1: Copy Files from GitHub to PWC Laptop

1. **Pull latest from GitHub** (on PWC laptop):
   ```powershell
   cd C:\Users\gchimion001\OneDrive - PwC\Desktop\VSCODE\PowerAppsRepoPWC\VSCODE\Test
   git pull origin claude/powerapp-sharepoint-deliverables-vbZKv
   ```

2. **Copy integration files** from GitHub repo to dvui folder:
   ```powershell
   # Copy types
   xcopy Test\dvui-integration\types\lovable.ts project-governance-dvui\src\types\lovable.ts /Y

   # Copy mappers
   xcopy Test\dvui-integration\mappers\dataverseToLovable.ts project-governance-dvui\src\mappers\dataverseToLovable.ts /Y

   # Copy example pages
   xcopy Test\dvui-integration\examples\DeliverablesPage.example.tsx project-governance-dvui\src\pages\DeliverablesPage.tsx /Y
   xcopy Test\dvui-integration\examples\CommandCenterPage.example.tsx project-governance-dvui\src\pages\CommandCenterPage.tsx /Y
   ```

3. **Copy Lovable components** from lovable-app-organized:
   ```powershell
   # Copy all Lovable components
   xcopy Test\lovable-app-organized\src\components project-governance-dvui\src\components /E /I /Y

   # Copy CommandCenter.tsx (you said you have it in dvui folder already)
   # If not, copy it from wherever you saved it
   ```

---

### Phase 2: Install Dependencies

Your Lovable components need these packages:

```powershell
cd project-governance-dvui

npm install framer-motion
npm install date-fns
npm install lucide-react
npm install class-variance-authority
npm install clsx
npm install tailwind-merge
npm install @radix-ui/react-avatar
npm install @radix-ui/react-badge
npm install @radix-ui/react-progress
npm install @radix-ui/react-slot
```

**Or install all at once:**
```powershell
npm install framer-motion date-fns lucide-react class-variance-authority clsx tailwind-merge @radix-ui/react-avatar @radix-ui/react-badge @radix-ui/react-progress @radix-ui/react-slot
```

---

### Phase 3: Configure Tailwind CSS

1. **Install Tailwind** (if not already):
   ```powershell
   npm install -D tailwindcss postcss autoprefixer
   npx tailwindcss init -p
   ```

2. **Update `tailwind.config.js`:**
   ```js
   /** @type {import('tailwindcss').Config} */
   export default {
     darkMode: ["class"],
     content: [
       "./index.html",
       "./src/**/*.{js,ts,jsx,tsx}",
     ],
     theme: {
       extend: {
         colors: {
           border: "hsl(var(--border))",
           input: "hsl(var(--input))",
           ring: "hsl(var(--ring))",
           background: "hsl(var(--background))",
           foreground: "hsl(var(--foreground))",
           primary: {
             DEFAULT: "hsl(var(--primary))",
             foreground: "hsl(var(--primary-foreground))",
           },
           secondary: {
             DEFAULT: "hsl(var(--secondary))",
             foreground: "hsl(var(--secondary-foreground))",
           },
           destructive: {
             DEFAULT: "hsl(var(--destructive))",
             foreground: "hsl(var(--destructive-foreground))",
           },
           muted: {
             DEFAULT: "hsl(var(--muted))",
             foreground: "hsl(var(--muted-foreground))",
           },
           accent: {
             DEFAULT: "hsl(var(--accent))",
             foreground: "hsl(var(--accent-foreground))",
           },
           popover: {
             DEFAULT: "hsl(var(--popover))",
             foreground: "hsl(var(--popover-foreground))",
           },
           card: {
             DEFAULT: "hsl(var(--card))",
             foreground: "hsl(var(--card-foreground))",
           },
         },
         borderRadius: {
           lg: "var(--radius)",
           md: "calc(var(--radius) - 2px)",
           sm: "calc(var(--radius) - 4px)",
         },
       },
     },
     plugins: [require("tailwindcss-animate")],
   }
   ```

3. **Install tailwindcss-animate:**
   ```powershell
   npm install -D tailwindcss-animate
   ```

4. **Update `src/index.css`** with Tailwind directives and CSS variables:
   ```css
   @tailwind base;
   @tailwind components;
   @tailwind utilities;

   @layer base {
     :root {
       --background: 0 0% 100%;
       --foreground: 222.2 84% 4.9%;
       --card: 0 0% 100%;
       --card-foreground: 222.2 84% 4.9%;
       --popover: 0 0% 100%;
       --popover-foreground: 222.2 84% 4.9%;
       --primary: 222.2 47.4% 11.2%;
       --primary-foreground: 210 40% 98%;
       --secondary: 210 40% 96.1%;
       --secondary-foreground: 222.2 47.4% 11.2%;
       --muted: 210 40% 96.1%;
       --muted-foreground: 215.4 16.3% 46.9%;
       --accent: 210 40% 96.1%;
       --accent-foreground: 222.2 47.4% 11.2%;
       --destructive: 0 84.2% 60.2%;
       --destructive-foreground: 210 40% 98%;
       --border: 214.3 31.8% 91.4%;
       --input: 214.3 31.8% 91.4%;
       --ring: 222.2 84% 4.9%;
       --radius: 0.5rem;
     }

     .dark {
       --background: 222.2 84% 4.9%;
       --foreground: 210 40% 98%;
       --card: 222.2 84% 4.9%;
       --card-foreground: 210 40% 98%;
       --popover: 222.2 84% 4.9%;
       --popover-foreground: 210 40% 98%;
       --primary: 210 40% 98%;
       --primary-foreground: 222.2 47.4% 11.2%;
       --secondary: 217.2 32.6% 17.5%;
       --secondary-foreground: 210 40% 98%;
       --muted: 217.2 32.6% 17.5%;
       --muted-foreground: 215 20.2% 65.1%;
       --accent: 217.2 32.6% 17.5%;
       --accent-foreground: 210 40% 98%;
       --destructive: 0 62.8% 30.6%;
       --destructive-foreground: 210 40% 98%;
       --border: 217.2 32.6% 17.5%;
       --input: 217.2 32.6% 17.5%;
       --ring: 212.7 26.8% 83.9%;
     }
   }

   @layer base {
     * {
       @apply border-border;
     }
     body {
       @apply bg-background text-foreground;
     }
   }
   ```

5. **Create `src/lib/utils.ts`:**
   ```typescript
   import { type ClassValue, clsx } from "clsx"
   import { twMerge } from "tailwind-merge"

   export function cn(...inputs: ClassValue[]) {
     return twMerge(clsx(inputs))
   }
   ```

---

### Phase 4: Update tsconfig.json for Path Aliases

Make sure your `tsconfig.json` has the `@` alias:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

---

### Phase 5: Update Vite Config for Path Aliases

Update `vite.config.ts`:

```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

---

### Phase 6: Customize the Mappers

**CRITICAL:** You need to update the status/risk/jobtitle mappings in `dataverseToLovable.ts` to match YOUR actual Dataverse option set values.

1. **Find your actual values:**
   - Go to make.powerapps.com
   - Open Dataverse â†’ Tables â†’ crda8_deliverables
   - Click on Columns â†’ crda8_status
   - Note the option set values (0, 1, 2, etc.) and labels

2. **Update the mapper functions:**
   ```typescript
   // Example: If your Dataverse has:
   // 0 = "Not Started"
   // 100000000 = "In Progress"
   // 100000001 = "Completed"
   // etc.

   function mapDeliverableStatus(dataverseStatus: number | string | undefined): DeliverableStatus {
     const statusMap: Record<string | number, DeliverableStatus> = {
       0: 'Not Started',
       100000000: 'In Progress',
       100000001: 'Under Review',
       100000002: 'Client Review',
       100000003: 'Completed',
       100000004: 'On Hold',
       100000005: 'At Risk',
     };

     return statusMap[dataverseStatus as any] || 'Not Started';
   }
   ```

3. **Do the same for:**
   - `mapRiskLevel()`
   - `mapJobTitle()`
   - `mapPTOStatus()`

---

### Phase 7: Integrate CommandCenter

1. **Update your `CommandCenter.tsx`** to accept props instead of hardcoded data:

   ```typescript
   // AT THE TOP OF CommandCenter.tsx
   import type { KPI, Deliverable, Workstream } from '@/types/lovable';

   interface CommandCenterProps {
     kpis: KPI[];
     deliverables: Deliverable[];
     workstreams: Workstream[];
     recentActivity: any[]; // Or define proper type
   }

   // CHANGE THE COMPONENT TO:
   export function CommandCenter({ kpis, deliverables, workstreams, recentActivity }: CommandCenterProps) {
     // Remove any hardcoded data
     // Use the props instead

     // Keep ALL your framer-motion animations!
     return (
       // ... your animated UI
     )
   }
   ```

2. **Use the example page:**
   - The `CommandCenterPage.example.tsx` shows how to fetch Dataverse data and pass it to CommandCenter
   - Copy it to `src/pages/CommandCenterPage.tsx`

---

### Phase 8: Update Your Routing

Update `App.tsx` to include the new pages:

```typescript
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { CommandCenterPage } from './pages/CommandCenterPage';
import { DeliverablesPage } from './pages/DeliverablesPage';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';

const queryClient = new QueryClient();

function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<CommandCenterPage />} />
          <Route path="/deliverables" element={<DeliverablesPage />} />
          {/* Add more routes */}
        </Routes>
      </BrowserRouter>
    </QueryClientProvider>
  );
}

export default App;
```

Install React Router if needed:
```powershell
npm install react-router-dom
```

---

### Phase 9: Build and Deploy

```powershell
cd project-governance-dvui

# Build the app
npm run build

# Deploy to Power Apps
pac code push
```

**Watch for errors!** If you get TypeScript errors, fix them before pushing.

---

## ğŸ”„ Your Iterative Workflow

Once everything is set up, your workflow will be:

1. **I tell you what to change:**
   - "Create a new file at `src/components/MyComponent.tsx` with this content..."
   - "Edit `src/mappers/dataverseToLovable.ts` and change line X..."

2. **You sync the changes:**
   ```powershell
   # Pull latest from GitHub
   cd C:\Users\gchimion001\OneDrive - PwC\Desktop\VSCODE\PowerAppsRepoPWC\VSCODE\Test
   git pull origin claude/powerapp-sharepoint-deliverables-vbZKv

   # Copy the specific file(s) I created/modified
   xcopy Test\path\to\file.ts project-governance-dvui\src\path\to\file.ts /Y
   ```

3. **You test locally:**
   ```powershell
   cd project-governance-dvui
   pac code run
   # Opens at http://localhost:5173
   ```

4. **You deploy:**
   ```powershell
   npm run build
   pac code push
   ```

5. **You verify in Power Apps:**
   - Go to make.powerapps.com
   - Open "Project Governance DVUI" app
   - See your changes live!

---

## ğŸ“ Quick Commands Cheat Sheet

```powershell
# Pull latest from GitHub
cd C:\Users\gchimion001\OneDrive - PwC\Desktop\VSCODE\PowerAppsRepoPWC\VSCODE\Test
git pull origin claude/powerapp-sharepoint-deliverables-vbZKv

# Navigate to dvui app
cd ..\project-governance-dvui

# Install dependencies (first time only)
npm install

# Test locally
pac code run

# Build
npm run build

# Deploy to Power Apps
pac code push

# Check what changed
git status

# See running apps
pac code list
```

---

## ğŸ¯ What We're Building

**Lovable UI** (beautiful, animated) + **Dataverse Data** (real project data) = **ğŸ”¥ Awesome App**

The mappers are the magic glue that converts:
- Dataverse entities â†’ Lovable types
- Option sets (0,1,2) â†’ Human readable ("In Progress", "Completed")
- Raw data â†’ Beautiful visualizations

---

## ğŸ› Common Issues & Fixes

### Import errors like `Cannot find module '@/types'`
**Fix:** Make sure tsconfig.json and vite.config.ts have the `@` alias configured.

### Tailwind classes not working
**Fix:** Make sure index.css has `@tailwind` directives and CSS variables.

### Component not found errors
**Fix:** Check the import path matches the actual file location.

### Type errors in mappers
**Fix:** Update the mapper functions to match your actual Dataverse field names.

### Build succeeds but pac code push fails
**Fix:** Run `pac auth list` to verify you're logged in. Re-auth if needed.

---

## ğŸš€ Next Steps

1. **Set up the base structure** (Phases 1-5)
2. **Customize the mappers** (Phase 6) - IMPORTANT!
3. **Integrate one component** (CommandCenter or DeliverableRow)
4. **Test locally** with `pac code run`
5. **Deploy** with `pac code push`
6. **Iterate** - Add more components, pages, features!

---

## ğŸ’¡ Pro Tips

- **Start small:** Get ONE component working first (DeliverableRow is easiest)
- **Test locally first:** Always run `pac code run` before deploying
- **Use console.log:** Debug your data mapping with `console.log(dataverseDeliverables, deliverables)`
- **Keep animations:** The framer-motion stuff is awesome - don't remove it!
- **Copy, don't type:** Less typos, faster workflow

---

**You got this! ğŸ‰**

Let me know when you're ready to start and I'll guide you through each file/change step by step!
